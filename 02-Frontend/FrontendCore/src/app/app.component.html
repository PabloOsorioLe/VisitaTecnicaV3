<!-- Fondo oscuro solo en login -->
<div *ngIf="!mostrarLayout" class="login-background"></div>

<!-- Layout principal visible solo cuando mostrarLayout es true -->
<div *ngIf="mostrarLayout" class="d-flex flex-column min-vh-100">

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary shadow-sm custom-navbar no-print d-flex align-items-center sticky-top">

    <div class="container d-flex align-items-center position-relative">

      <!-- Botón hamburguesa -->
      <button
        class="navbar-toggler me-2"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarNav"
        aria-controls="navbarNav"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>

      <!-- Título dinámico -->
      <span class="navbar-title text-white fw-bold fs-5 flex-grow-1 text-center">
        {{ tituloActual }}
      </span>

      <!-- Menú colapsable -->
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav w-100 mt-3 mt-lg-0">
          <li class="nav-item">
            <a class="nav-link d-flex align-items-center" routerLink="/visitas" routerLinkActive="active" (click)="cerrarMenu()">
              <i class="bi bi-house-door-fill me-1"></i> Visitas
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link d-flex align-items-center" routerLink="/personas" routerLinkActive="active" (click)="cerrarMenu()">
              <i class="bi bi-person-fill me-1"></i> Personas
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link d-flex align-items-center" routerLink="/productos" routerLinkActive="active" (click)="cerrarMenu()">
              <i class="bi bi-box-seam me-1"></i> Productos
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link d-flex align-items-center" routerLink="/informe-tecnico" routerLinkActive="active" (click)="cerrarMenu()">
              <i class="bi bi-file-earmark-text me-1"></i> Informe Técnico
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link d-flex align-items-center" routerLink="/reuniones" routerLinkActive="active" (click)="cerrarMenu()">
              <i class="bi bi-file-earmark-text me-1"></i> Reuniones
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link d-flex align-items-center" href="#" (click)="cerrarSesion($event)" title="Cerrar sesión">
              <i class="bi bi-arrow-left-circle me-1"></i> Salir
            </a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Contenido principal -->
  <main>
    <router-outlet></router-outlet>
  </main>
</div>

<!-- En caso de login (mostrarLayout es falso), se muestra solo el router-outlet sin layout -->
<div *ngIf="!mostrarLayout">
  <router-outlet></router-outlet>
</div>
